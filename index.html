
<html>
  <head>
    <title>TypeAudio</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <header>
      <div align = "center">
        <br>
        <audio preload = "auto" id="rllly" controls>
          <source src="" id="rlly" />
        </audio>
        <div class="progressbar"></div>
        <h5 id = "time"></h5>
        <div id = "textformat">
          <button class = "textformatstyles" id="jBold"><b>B</b></button>
          <button class = "textformatstyles" id= "jItalic"><i>I</i></button>
          <button class = "textformatstyles" id= "jUnder"><u>U</u></button>
          <button class = "textformatstyles" id= "jCut">Cut</button>
          <button class = "textformatstyles" id= "jLess">&#8690</button>
          <button class = "textformatstyles" id= "jMore">&#8689</button>
          <button class = "textformatstyles" id= "jUndo">&olarr;</button>
          <button class = "textformatstyles" id= "jRedo">&orarr;</button><br><br>
        </div>
       </div>
    </header>
    <div id = "control">
      <button id = "button1" onclick = "playPause()">|| ESC</button><br><br>
      <button id = "button2" onclick = "playPause()">&#9658 ESC</button><br><br>
      <button id = "button3" onclick = "rewindAudio()">&#9194 F1</button><br><br>
      <button id = "button4" onclick = "fastAudio()">&#9193 F2</button><br><br>
      <button id = "button5" onclick = "insertTimestamp()">&#128339 F3</button><br><br>
    </div>
    <div id = "textbox" contenteditable = "true">
    </div>
    <div id = "bottombar">
      <b><div id = "wc"></div></b>
      <button id="myBtn"><b>LOAD AUDIO</b></button>
    </div>
    

    <!-- The Modal -->
    <div id="myModal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>
          Load audio file from computer.
        </h2>
        <input type="file" id="rll" />
      </div>

    </div>
    
    <!--<div class="menu">
      
        <p class="menu-option">Load Audio</p>
        <p class="menu-option">Play</p>
        <p class="menu-option">Pause</p>
        <p class="menu-option">Fast-Forward</p>
        <p class="menu-option">Rewind</p>
      
    </div>-->
    <!--<script src = "script.js"></script>-->
    <script src="jquery.js"></script>
    <script src="progressor.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="mousetrap.min.js"></script>
    <script src= "script.js"></script>
    <script>      
      var modal = document.getElementById("myModal");

      // Get the button that opens the modal
      var btn = document.getElementById("myBtn");
      
      // Get the <span> element that closes the modal
      var span = document.getElementsByClassName("close")[0];
      
      // When the user clicks on the button, open the modal 
      btn.onclick = function() {
        modal.style.display = "block";
      }
      
      // When the user clicks on <span> (x), close the modal
      span.onclick = function() {
        modal.style.display = "none";
      }
      
      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
      
      function rewindAudio() {
// Check for audio element support.
	if (window.HTMLAudioElement) {
		try {
			var oAudio = document.getElementById('rllly');
			oAudio.currentTime -= 3.0;
		}
		catch (e) {
			// Fail silently but show in F12 developer tools console
			if(window.console && console.error("Error:" + e));
		}
	}
}

function fastAudio() {
// Check for audio element support.
	if (window.HTMLAudioElement) {
		try {
			var oAudio = document.getElementById('rllly');
			oAudio.currentTime += 3.0;
		}
		catch (e) {
			// Fail silently but show in F12 developer tools console
			if(window.console && console.error("Error:" + e));
		}
	}

}
/*Thank you, Eliot Bentley*/
function playPause() {
	
		var oAudio = document.getElementById('rllly');
		if (oAudio.paused) {
			oAudio.play();
		} else {
			oAudio.pause();
		}
	}


  // get timestamp
// var timestamp;
function getTimestamp(){
    console.log("Suprise")
    // get timestap
    var time = document.getElementById('rllly').currentTime  
    var minutes = Math.floor(time / 60);
    var seconds = ("0" + Math.round( time - minutes * 60 ) ).slice(-2);
    return minutes+":"+seconds;
};

function insertTimestamp(){
    document.execCommand('insertHTML',false,
    '<span class="timestamp" contenteditable="false" data="hi" onclick="var x = this; setFromTimestamp(\'' + getTimestamp() + '\', x);">' + getTimestamp() + '</span>&nbsp;'
    );
    $('.timestamp').each(function( index ) {
        $( this )[0].contentEditable = false;
    });
}
  
function timestamps() {
    insertTimestamp();
    return false;
  }
      
 

      
      var myProgressBar = new Progressor({
       media : document.getElementsByTagName('audio')[0],
       bar : document.getElementsByClassName('progressbar')[0],
       time: document.getElementById('time'),

       /*text: files[0].name,*/
     });
   </script>
  </body>
</html>
<!--https://codepen.io/dmack/pen/VLxpyv?editors=1111-->